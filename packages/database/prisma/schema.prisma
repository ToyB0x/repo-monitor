// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "sqlite"
  url      = "file:../../../sqlite/dev.db"
}

generator client {
  provider = "prisma-client-js"
  output   = "../generated/client"
}

model Scan {
  id            String   @id @default(cuid())
  repository    String
  commitSha     String
  commitMessage String
  commitDate    DateTime
  createdAt     DateTime

  results Result[]
}

enum Status {
  SUCCESS
  FAILED
}

model Result {
  id                String   @id @default(cuid())
  packageName       String
  status            Status
  numTrace          Int
  numType           Int
  numHotSpot        Int
  durationMs        Int
  durationMsHotSpot Int
  createdAt         DateTime

  scanId String
  scan   Scan   @relation(fields: [scanId], references: [id])

  @@unique([scanId, packageName])
}
